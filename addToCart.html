<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body onload="fetchProduct()">

    <div id="mycart"></div>
    <div class="row" id="carts"></div>


    <script>

        const carts = [];
        let Products = [];

        const fetchProduct =()=>
        {
            fetch("https://fakestoreapi.com/products")
            .then(y=>y.json())
            .then(y=> {

                Products = y;
                display(y);
            })

        }

        const display = (data)=> {

         const dis =   data.map((y,index)=>{

                return (`<div class="col-4"><div class="card" style="width:400px">
  <img class="card-img-top" src="${y.image}" alt="Card image">
  <div class="card-body">
    <h4 class="card-title">${y.title}</h4>
    <p class="card-text">${y.description}</p>
    <a href="#" class="btn btn-primary" onclick="addProduct(${index})">Add To Cart</a>
  </div>
</div>
</div>
`)

            })


document.getElementById("carts").innerHTML = dis.join(" ");


        }

        // to add cart
        // const addProduct = (myindex) =>{
        //     carts.push(Products[myindex]);
        //     console.log(carts);
        //     document.getElementById("macart").innerHTML = carts.length;
        // }

        const addProduct = (myindex)=>{

            const selectedProduct= Products[myindex];
            const findProduct = carts.find((v)=>{

                return v.item.id == selectedProduct.id
            })

            if(!findProduct)
            {

                carts.push({item: selectedProduct,count:1});
            }
            else
            {
                findProduct.count = findProduct.count+1;

            }

          let p = carts.reduce((pre,cuu)=>{

            return pre + cuu.item.price * cuu.count;

           },0);


           console.log(p);

         

        }


    </script>
    
</body>
</html>